## VK test

```text
Написать апи формирования ленты постов
Авторизация/регистрация 
предполагаем что уже есть ($auth_user_id можем захардкодить, но предполагаем, что авторизованных пользователей много)

Посты - простой текст

требуемые методы
feed.get
feed.subscribe //подписываемся на автора
feed.unsubscribe //отписываемся от автора

post.add 
post.edit
post.delete

feed.get
возвращает посты авторов на которых подписан пользователь в хронологическом порядке
Предполагаем что количество пользователей, которые публикуют посты 10млн.

В наличие имеем php7.* (
обязательно БЕЗ ФРЕЙМВОРКОВ, 
можно использовать библиотеки вроде db_connect, math, memcached... т.е. для общения со внешними сервисами. 
Библиотеки вроде роутинга по урлу, fastAPI, автоматическое обслуживание данных в кэше и т.п. не допускаются), 
любая реляционная бд (mysql, postgresql), memcache (при желании - redis), 
кроны (при желании можно использовать очередь rabbitmq).

Продумать оптимицазию, структуру таблиц, индексы, кэш и т.д.
Чтобы при единовременном запросе от большой части пользователей не легла база
БД распеределена по большому числу серверов, как следствие join не доступен

Ответ в формате - архив/репозиторий (включая дамп бд или запросы на её инициализацию)
```

### Сайт

```text
                   nginx (round robin)
               app1    app2 
        [http|worker] [http|worker]
                  rabbitmq 
        (очереди user.posts/user.subs)

   memcached1 memcached2 memcached3 memcached4
   
      post_db1 post_db2 user_db1 user_db2
```

#### Rabbitmq Management
http://localhost:15672
backend/backend

#### Supervisor
http://localhost:9011/
user/user

http://localhost:9012/
user/user

#### Запуск
```sh
docker-compose build
docker-compose up
```

### Структура проекта
```text
docker/ конфигурация docker
init/
    post/ структура БД 
    user/ структура БД
log/ смапленная дирректория docker
src/
    app/
        api/ - декларация роутинг, обработчики http запросов
        handler/ обработчики очереди
        message/ сообщения дл очереди
        module/ бизнес логика
        config.php оснваная конфигурация
        worker.php обработчик очереди (стартуют автоматически supervisor-ом)
src/
    lib/ вспомогательные бибилиотеки
```

### Примеры запросов
[Коллекция POSTMAN](vk-test.postman_collection.json)
